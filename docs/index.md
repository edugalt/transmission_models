# Tree Visualization Library Documentation

Welcome to the documentation for the Tree Visualization Library, a JavaScript library designed to visualize transmission tree data from the `transmission_models` Python package.

## Overview

The Tree Visualization Library provides interactive D3.js-based visualizations of phylogenetic trees with the following key features:

- **Interactive Tree Visualization**: Display transmission trees with parent-child relationships
- **Dual Layout Modes**: Switch between hierarchical and infection time-based layouts
- **Sampling Status Visualization**: Distinguish between sampled and unsampled hosts
- **Interactive Features**: Hover effects, responsive design, and smooth transitions
- **Easy Integration**: Simple API that works with JSON data from transmission_models

## Quick Navigation

### Getting Started
- **[Quick Start Guide](quick_start.md)** - Get up and running in minutes
- **[Interactive Example](tree_visualization_example.html)** - Try the library with sample data

### Documentation
- **[Full Documentation](tree_visualization.md)** - Complete API reference and usage guide
- **[Data Format Guide](tree_visualization.md#data-format-compatibility)** - Understanding JSON structure
- **[Customization Guide](tree_visualization.md#customization)** - Styling and customization options

### Examples
- **[Basic Usage](tree_visualization.md#examples)** - Simple tree visualization
- **[Interactive Features](tree_visualization.md#examples)** - Time layout toggle and hover effects
- **[Multiple Trees](tree_visualization.md#examples)** - Displaying multiple models

## Library Features

### Core Functionality
- **`plot_Tree(data, container)`** - Main function to create tree visualizations
- **Automatic Layout** - Responsive design that adapts to container size
- **D3.js Integration** - Built on D3.js for powerful and flexible visualizations

### Interactive Elements
- **Hover Highlighting** - Nodes and relatives highlight on mouseover
- **Time Layout Toggle** - Switch between hierarchical and temporal layouts
- **Smooth Transitions** - Animated transitions between different states

### Visual Design
- **Color Coding** - Blue for sampled hosts, orange for unsampled hosts
- **Legend** - Automatic legend showing node types
- **Responsive** - Adapts to different screen sizes and container dimensions

## Data Compatibility

The library is designed to work with JSON files generated by the `transmission_models` package:

### Supported Model Types
- **Simple Models** - Basic transmission trees
- **Genetic Models** - Trees with genetic distance information
- **Location Models** - Trees with geographic location data

### Required Data Structure
```json
{
    "log_likelihood": number,
    "tree": {
        "name": string,
        "index": number,
        "Infection time": number,
        "Sampled": boolean,
        "root": boolean,
        "children": [...]
    },
    "parameters": {...}
}
```

## Installation

### CDN Usage
```html
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://www.maths.usyd.edu.au/u/oscarf/tree_layout/tree_plot.js"></script>
```

### Local Installation
Download the library and include it in your project:
```html
<script src="path/to/tree_plot.js"></script>
```

## Basic Usage

```html
<!DOCTYPE html>
<html>
<head>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://www.maths.usyd.edu.au/u/oscarf/tree_layout/tree_plot.js"></script>
</head>
<body>
    <div id="tree-container"></div>
    
    <script>
        fetch('your_model.json')
            .then(response => response.json())
            .then(data => {
                plot_Tree(data, "#tree-container");
            });
    </script>
</body>
</html>
```

## Browser Support

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## Performance Considerations

- **Small to Medium Trees** (< 1000 nodes): Optimal performance
- **Large Trees** (> 1000 nodes): May require optimization
- **Memory Usage**: Consider virtual scrolling for very large datasets
- **Animation Performance**: Can be disabled for performance-critical applications

## Troubleshooting

### Common Issues
1. **D3.js Not Loaded** - Ensure D3.js is loaded before the tree library
2. **Container Not Found** - Verify CSS selector matches existing element
3. **Invalid JSON Data** - Check data format matches expected structure
4. **Missing Properties** - Ensure all nodes have required properties

### Debug Mode
Enable console logging for troubleshooting:
```javascript
console.log('Tree data:', data);
console.log('Container:', containerDiv);
```

## Contributing

To contribute to the library:
1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test with various data formats
5. Submit a pull request

## Support and Resources

- **Documentation**: This comprehensive guide
- **Examples**: Interactive demos and code samples
- **Data Format**: Detailed specification of expected JSON structure
- **Troubleshooting**: Common issues and solutions

## Related Projects

- **[transmission_models](https://github.com/your-repo/transmission_models)** - Python package for transmission modeling
- **[D3.js](https://d3js.org/)** - Data-driven documents for the web
- **[BiMMSBM Documentation](https://oscarcapote.github.io/BiMMSBM/index.html)** - Similar documentation style reference

---

**Library URL**: https://www.maths.usyd.edu.au/u/oscarf/tree_layout/tree_plot.js

**Last Updated**: December 2024

**Version**: 1.0.0 